import{m as A,r as L,E as P,F as k,G as j,o as R,h as N,j as z,g as D,I as M,s as Q,k as O,J as U,_ as $,L as T,M as G,N as J,D as K,x as W,y as X,z as Y,O as i,R as Z,S as b,A as n,B as v,U as H,V as ee,W as te,X as oe,Q as se,Y as B,Z as ae,$ as ne}from"./index.1eab7e9b.js";import{u as ie,Q as re,a as S}from"./use-quasar.30792f97.js";import{a as le,Q as F}from"./QInput.e74c1f93.js";import"./use-dark.880fe43f.js";var ue=A({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(s,{slots:y,emit:g}){const r=D(),o=L(null);let u=0;const c=[];function _(e){const m=typeof e=="boolean"?e:s.noErrorFocus!==!0,x=++u,C=(t,a)=>{g("validation"+(t===!0?"Success":"Error"),a)},E=t=>{const a=t.validate();return typeof a.then=="function"?a.then(d=>({valid:d,comp:t}),d=>({valid:!1,comp:t,err:d})):Promise.resolve({valid:a,comp:t})};return(s.greedy===!0?Promise.all(c.map(E)).then(t=>t.filter(a=>a.valid!==!0)):c.reduce((t,a)=>t.then(()=>E(a).then(d=>{if(d.valid===!1)return Promise.reject(d)})),Promise.resolve()).catch(t=>[t])).then(t=>{if(t===void 0||t.length===0)return x===u&&C(!0),!0;if(x===u){const{comp:a,err:d}=t[0];if(d!==void 0&&console.error(d),C(!1,a),m===!0){const q=t.find(({comp:I})=>typeof I.focus=="function"&&M(I.$)===!1);q!==void 0&&q.comp.focus()}}return!1})}function l(){u++,c.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function p(e){e!==void 0&&Q(e);const m=u+1;_().then(x=>{m===u&&x===!0&&(s.onSubmit!==void 0?g("submit",e):e!==void 0&&e.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function h(e){e!==void 0&&Q(e),g("reset"),O(()=>{l(),s.autofocus===!0&&s.noResetFocus!==!0&&f()})}function f(){le(()=>{if(o.value===null)return;const e=o.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||o.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||o.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(o.value.querySelectorAll("[tabindex]"),m=>m.tabIndex>-1);e!=null&&e.focus({preventScroll:!0})})}P(U,{bindComponent(e){c.push(e)},unbindComponent(e){const m=c.indexOf(e);m>-1&&c.splice(m,1)}});let V=!1;return k(()=>{V=!0}),j(()=>{V===!0&&s.autofocus===!0&&f()}),R(()=>{s.autofocus===!0&&f()}),Object.assign(r.proxy,{validate:_,resetValidation:l,submit:p,reset:h,focus:f,getValidationComponents:()=>c}),()=>N("form",{class:"q-form",ref:o,onSubmit:p,onReset:h},z(y.default))}}),ce="/assets/wave.e2db6d30.png",de="/assets/login.77420364.svg",fe="/assets/avatar.dae180b6.svg";const w=s=>(ae("data-v-1053561a"),s=s(),ne(),s),me={key:0},ve=w(()=>i("img",{src:ce,class:"wave",alt:"login-wave"},null,-1)),pe={class:"row",style:{height:"90vh"}},ge=w(()=>i("div",{class:"col-0 col-md-6 flex justify-center content-center"},[i("img",{src:de,class:"responsive",alt:"login-image"})],-1)),_e=w(()=>i("img",{src:fe,alt:"avatar"},null,-1)),he=w(()=>i("div",{class:"q-pt-lg"},[i("div",{class:"col text-h6 ellipsis flex justify-center"},[i("h2",{class:"text-h2 text-uppercase q-my-none text-weight-regular"}," Login ")])],-1)),ye={class:"text-center q-mt-sm q-gutter-lg"},xe={__name:"LoginSesion",setup(s){const y=T(),g=G();let r=ie();const o=J({email:"",password:""}),u=L(!0),c=async()=>{if(!o.email||!o.password)r.notify({type:"negative",message:"Debes completar todos los campos para continuar con la operaci\xF3n."});else{r.loading.show({message:"Iniciando sesi\xF3n..."});try{if(!await y.doLogin(o))throw new Error("Error al iniciar sesi\xF3n");_()}catch(l){l&&r.notify({type:"negative",message:l})}finally{r.loading.hide()}}},_=()=>{const l={path:"/home"};g.push(l)};return K(async()=>{await y.init()?_():u.value=!1}),(l,p)=>{const h=W("router-link");return u.value?ee("",!0):(X(),Y("div",me,[ve,i("div",pe,[ge,i("div",{class:Z([{"justify-center":b(r).screen.md||b(r).screen.sm||b(r).screen.xs},"col-12 col-md-6 flex content-center"])},[n(re,{style:H(b(r).screen.lt.sm?{width:"80%"}:{width:"60%"})},{default:v(()=>[n(S,null,{default:v(()=>[n(te,{size:"103px",class:"absolute-center shadow-10"},{default:v(()=>[_e]),_:1})]),_:1}),n(S,null,{default:v(()=>[he]),_:1}),n(S,null,{default:v(()=>[n(ue,{class:"q-gutter-md",onSubmit:oe(c,["prevent"])},{default:v(()=>[n(F,{label:"Email",modelValue:o.email,"onUpdate:modelValue":p[0]||(p[0]=f=>o.email=f)},null,8,["modelValue"]),n(F,{label:"Password",type:"password",modelValue:o.password,"onUpdate:modelValue":p[1]||(p[1]=f=>o.password=f)},null,8,["modelValue"]),i("div",null,[n(se,{class:"full-width",color:"primary",label:"Login",type:"submit",rounded:""}),i("div",ye,[n(h,{class:"text-white",to:"/login"},{default:v(()=>[B("Esqueceu a senha?")]),_:1}),n(h,{class:"text-white",to:"/login"},{default:v(()=>[B("Criar conta")]),_:1})])])]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["style"])],2)])]))}}};var Ee=$(xe,[["__scopeId","data-v-1053561a"]]);export{Ee as default};
